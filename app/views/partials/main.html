


<div growl></div>
<section ng-controller="bookmarksController">
    <snap-drawers>
        <snap-drawer ng-controller="tagsController">
            <h1>Tags</h1>
            <header>
                <form ng-submit="addItem()">
                    <div class="input-group">
                        <label class="sr-only">Add New Tag</label>
                        <input type="text" class="form-control" ng-model="newItem" placeholder="Tag Name">
                        <span class="input-group-btn">
                            <button class="btn btn-primary" type="submit">Add</button>
                        </span>
                    </div>
                </form>
            </header>
            <br/>
            <section>
                <ul class="list-unstyled"  >
                    <li class="tag-item" ng-repeat="item in items track by $index" ui-draggable="true" drag="item">
                        <span class="badge">{{countBookmarksWithTag(item)}}</span>
                        <span editable-text="item.name" buttons="no" e-form="textBtnForm" onaftersave="update(item)">{{item.name}}</span>
                        <i class="fa fa-minus-square pull-right" ng-confirm-message="Are you sure?"
ng-confirm-click="removeItem($index)"></i>
                        <button class="btn btn-default btn-sm pull-right" ng-click="textBtnForm.$show()" ng-hide="textBtnForm.$visible">
                            edit
                        </button>
                    </li>
                </ul>
            </section>
        </snap-drawer>
        <div snap-drawer="right" class="container">
            <h1><span ng-show="currentUser">{{ currentUser.name }}</span></h1>
            <div ng-include="'partials/navbar'"></div>
            <br/>
            <br/>
            <button class="btn btn-primary btn-block" ng-click="newItem()">Add New Bookmark</button>
            <br/>
            <h4>
                <a  href="#" editable-select="items.sorting" buttons="no" e-ng-options="s for s in ['title','description','count','created']">
                    <strong>Sort By:</strong>
                    {{items.sorting || "..."}}
                </a>
            </h4>
            <h4> 
                <a  href="#" editable-select="items.sortAsc" buttons="no" e-ng-options="s.value as s.text for s in [{value:false,text:'Ascending'},{value:true,text:'Descending'}]">    
                    {{!items.sortAsc ? "Ascending" : "Descending"}}
                </a>
            </h4>
            
        </div>
    </snap-drawers>

    <snap-content>
        <header class="navbar-inverse navbar-collapse text-center">
            <i class="fa fa-bars open-sidebar navbar-header pull-left" snap-toggle="left"></i>
            <span editable-text="search.text">
                {{search.text || 'Bookmarks'}} 
                <i class="fa fa-search"></i>
            </span>
            <i class="fa fa-bars open-sidebar navbar-header pull-right" snap-toggle="right"></i>
        </header>
        <section id="bookmark-content" resize ng-style="style()" >
            <div masonry masonry-options="{ transitionDuration: '0s' }" id="content-table" load-images="false">
                <div class="masonry-brick col-lg-2 col-md-3 col-sm-4" ng-repeat="item in items | filter:search.text | orderBy:items.sorting:items.sortAsc track by $index" ui-on-Drop="onDrop($event,$data,item)"
                     >
                    <div class="thumbnail" >
                        <div class="caption"  >
                            <h4 class="bookmarkName">
                                <a ng-click="incrementCounter(item)" href="{{item.url}}" target="_blank">
                                    <span class="badge pull-right">{{item.count}}</span>
                                    
                                    <span >{{item.title}}</span>
                                </a>
                            </h4>
                            <div>
                                <p class="bookmark-description">{{item.description}}</p>
                                
                                <p>
                                    <span class="label label-default">Created: {{item.created | date:'mediumTime'}}</span>
                                    <span class="label label-default">Updated: {{item.updated | date:'mediumTime'}}</span>
                                </p>
                                <p>
                                    <span ng-repeat="tag in item.tags" class="tag label label-info">{{tag.name}}</span>
                                </p>
                                <div class="btn-group btn-group-sm">
                                        <button type="button" class="btn btn-primary" ng-click="editItem(item)">
                                            <i class="fa fa-pencil"></i> Edit
                                        </button>
                                        <button type="button" class="btn btn-danger" ng-confirm-message="Are you sure?"
    ng-confirm-click="removeItem(item)">
                                            <i class="fa fa-ban"></i> Remove
                                        </button>
                                        
                                        
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </snap-content>
</section>


<script type="text/ng-template" id="editItemModal.tmlp.html">
    <form class="form-horizontal" role="form">
        <div class="modal-header">
            <h3 class="modal-title">I'm a modal!</h3>
        </div>
        <div class="modal-body">
                <div class="form-group">
                    <label for="name" class="col-sm-2 control-label">Name</label>
                    <div class="col-sm-10">
                        <input id="name" type="text" class="form-control" ng-model="item.title" placeholder="Bookmark Name">
                    </div>
                </div>
                <div class="form-group">
                    <label for="name" class="col-sm-2 control-label">Description</label>
                    <div class="col-sm-10">
                        <textarea id="description" class="form-control" ng-model="item.description" placeholder="Bookmark Description"></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label for="url" class="col-sm-2 control-label">URL</label>
                    <div class="col-sm-10">
                        <input id="url" type="text" class="form-control" ng-model="item.url" placeholder="Bookmark URL">
                    </div>
                </div>
                <div class="form-group">
                    <tags-input ng-model="item.tags" display-property="name" add-from-autocomplete-only="true">
                        <auto-complete min-length="1" source="loadTags($query)"></auto-complete>
                    </tags-input>
                    
                </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" ng-disabled="changed()" ng-click="ok()">OK</button>
            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
        </div>
    </form>
</script>
